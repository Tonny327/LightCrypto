# Инструкция по сборке исполняемого файла

## Быстрый старт

1. **Соберите проект (если еще не собрали):**
   ```bash
   cd /home/tonny/projects/MyCryptoProject/LightCrypto
   mkdir -p build && cd build
   cmake .. && make
   ```

2. **Установите python3-venv (если еще не установлен):**
   ```bash
   sudo apt-get install python3-venv
   ```
   
   **Примечание:** Скрипт сборки автоматически создаст виртуальное окружение и установит все зависимости в него. Вам не нужно устанавливать зависимости вручную!

3. **Запустите сборку:**
   ```bash
   ./build_executable.sh
   ```

4. **Запустите исполняемый файл:**
   ```bash
   cd gui_qt/dist
   ./lightcrypto
   ```
   
   **Важно:** Используйте `./lightcrypto` (с точкой и слэшем), а не просто `lightcrypto`!
   
   **Примечание:** Если при запуске появляется ошибка о Qt плагинах, установите системные библиотеки:
   ```bash
   sudo apt-get install libxcb-cursor0 libxcb-xinerama0 libqt6gui6 libqt6core6 libqt6widgets6
   ```

## Что было создано

- `requirements.txt` - зависимости Python (PyQt6, PyInstaller)
- `lightcrypto.spec` - конфигурация PyInstaller
- `build_executable.sh` - скрипт автоматической сборки
- `BUILD_README.md` - подробная документация (на английском)

## Структура файлов

После сборки в директории `gui_qt/dist/` будет создан исполняемый файл `lightcrypto`, который:
- ✅ Содержит все необходимые библиотеки
- ✅ Включает исполняемые файлы `tap_encrypt` и `tap_decrypt`
- ✅ Включает CSV файлы из `CipherKeys/`
- ✅ Включает скрипты настройки TAP интерфейсов
- ✅ Работает без установленного Python

## Важные замечания

1. **Платформа:** Исполняемый файл будет создан для **Linux** (той же архитектуры, на которой выполняется сборка).
   - ✅ Работает на Linux (x86_64)
   - ❌ НЕ работает на Windows или macOS
   - ⚠️ Для других платформ нужна сборка на соответствующей системе

2. **Совместимость между дистрибутивами:**
   - Исполняемый файл должен работать на большинстве современных Linux дистрибутивов
   - Если возникают ошибки с библиотеками Qt, установите системные зависимости:
     ```bash
     # Ubuntu/Debian
     sudo apt-get install libqt6gui6 libqt6core6 libqt6widgets6 libxcb-xinerama0
     
     # Fedora/RHEL
     sudo dnf install qt6-qtbase-gui
     
     # Arch Linux
     sudo pacman -S qt6-base
     ```

3. **Размер файла:** Исполняемый файл будет достаточно большим (50-100 МБ) из-за включения всех библиотек Qt.

4. **Права доступа:** После сборки может потребоваться:
   ```bash
   chmod +x dist/lightcrypto
   ```

## Устранение проблем

### Ошибка: "tap_encrypt не найден"
Убедитесь, что проект собран: `cd build && make`

### Ошибка: "externally-managed-environment"
Скрипт сборки автоматически использует виртуальное окружение, поэтому эта ошибка не должна возникать. Если она появилась, убедитесь, что используете обновленный скрипт `build_executable.sh`.

### Ошибка: "Модуль venv не доступен"
Установите python3-venv:
```bash
sudo apt-get install python3-venv
```

### Ошибка: "PyQt6 не установлен"
Скрипт автоматически установит все зависимости в виртуальное окружение. Если ошибка все же возникает, проверьте, что скрипт имеет права на выполнение: `chmod +x build_executable.sh`

### Ошибка: "команда не найдена" при запуске `lightcrypto`

Используйте `./lightcrypto` (с точкой и слэшем) вместо просто `lightcrypto`:
```bash
cd gui_qt/dist
./lightcrypto
```

Или используйте полный путь:
```bash
/home/tonny/projects/MyCryptoProject/LightCrypto/gui_qt/dist/lightcrypto
```

### Ошибка: "Could not load the Qt platform plugin xcb"

Установите системные библиотеки Qt:
```bash
sudo apt-get install libxcb-cursor0 libxcb-xinerama0 libqt6gui6 libqt6core6 libqt6widgets6
```

### Ошибка при запуске исполняемого файла
Проверьте права: `chmod +x dist/lightcrypto`

