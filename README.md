# üîê LightCrypto

  –í –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∞–ª–≥–æ—Ä–∏—Ç–º —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–≥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ–º –∫–ª—é—á–∞ –Ω–∞ –±–∞–∑–µ ECDH (Curve25519, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É libsodium). 
  –û–±–º–µ–Ω –ø—É–±–ª–∏—á–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —á–µ—Ä–µ–∑ —Å–æ–∫–µ—Ç, –ø–æ—Å–ª–µ —á–µ–≥–æ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –æ–±—â–∏–π —Å–µ–∫—Ä–µ—Ç —Å –ø–æ–º–æ—â—å—é X25519. 
  –ü–æ–ª—É—á–µ–Ω–Ω—ã–π –∫–ª—é—á –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∞–ª–≥–æ—Ä–∏—Ç–º–µ AEAD ChaCha20-Poly1305 –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ Ethernet-–∫–∞–¥—Ä–æ–≤.
  
---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ tap_encrypt.cpp     // –®–∏—Ñ—Ä—É–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–∞–¥—Ä—ã –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è (--msg)
‚îú‚îÄ‚îÄ tap_decrypt.cpp     // –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç –∫–∞–¥—Ä—ã –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è (--msg)
‚îú‚îÄ‚îÄ test_speed.cpp      // –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
build/                  // –°—é–¥–∞ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã
setup_tap_pair.sh       // –°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω–∏—è TAP-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
```
---

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å

```bash
# 1. –£—Å—Ç–∞–Ω–æ–≤–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
sudo apt install libsodium-dev

# 2. –°–æ–∑–¥–∞–π TAP-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã —Å –ø–æ–º–æ—â—å—é —Å–∫—Ä–∏–ø—Ç–∞
bash setup_tap_pair.sh

# 3. –°–∫–æ–º–ø–∏–ª–∏—Ä—É–π
mkdir -p build
g++ -g src/tap_encrypt.cpp -lsodium -o build/tap_encrypt
g++ -g src/tap_decrypt.cpp -lsodium -o build/tap_decrypt

# 4. –ó–∞–ø—É—Å—Ç–∏ —Å–∫—Ä–∏–ø—Ç
bash rebuild.sh

---

## üì° –†–µ–∂–∏–º –ø–µ—Ä–µ–¥–∞—á–∏ Ethernet-–∫–∞–¥—Ä–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

### üñ• –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–Ω–∞ –æ–¥–Ω–æ–º –ü–ö):

```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1:
sudo ./build/tap_decrypt

# –¢–µ—Ä–º–∏–Ω–∞–ª 2:
sudo ./build/tap_encrypt
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è IP `127.0.0.1` –∏ –ø–æ—Ä—Ç `12345`.

---

### üåê –ó–∞–ø—É—Å–∫ –ø–æ —Å–µ—Ç–∏ (–Ω–∞ –¥–≤—É—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö):

#### –ù–∞ –ø—Ä–∏—ë–º–Ω–∏–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, IP: 192.168.1.2):
```bash
sudo ./build/tap_decrypt 0.0.0.0 5555
```
–∏–ª–∏:
```bash
sudo ./build/tap_decrypt 5555
```

#### –ù–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ:
```bash
sudo ./build/tap_encrypt 192.168.1.2 5555
```

---

## üí¨ –†–µ–∂–∏–º –ø–µ—Ä–µ–¥–∞—á–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (`--msg`)

–í —ç—Ç–æ–º —Ä–µ–∂–∏–º–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã —à–∏—Ñ—Ä—É—é—Ç –∏ –ø–µ—Ä–µ–¥–∞—é—Ç —Å—Ç—Ä–æ–∫–∏, –≤–≤–µ–¥—ë–Ω–Ω—ã–µ –≤—Ä—É—á–Ω—É—é.

### üì• –ü—Ä–∏—ë–º–Ω–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π:

```bash
sudo ./build/tap_decrypt --msg
```

–∏–ª–∏ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø–æ—Ä—Ç–∞:
```bash
sudo ./build/tap_decrypt --msg 5555
```

### üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å —Å–æ–æ–±—â–µ–Ω–∏–π:

```bash
sudo ./build/tap_encrypt --msg
```

–∏–ª–∏ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º IP –∏ –ø–æ—Ä—Ç–∞:
```bash
sudo ./build/tap_encrypt --msg 127.0.0.1 5555
```

> ‚úÖ **–ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å IP –∏ –ø–æ—Ä—Ç, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è** `127.0.0.1:12345`.

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ—Å—Ç–æ –≤–≤–æ–¥–∏ —Ç–µ–∫—Å—Ç –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è ‚Äî –æ–Ω –±—É–¥–µ—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø—Ä–∏—ë–º–Ω–∏–∫–∞.

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –∫–∞–¥—Ä–æ–≤

–ö–∞–∂–¥—ã–π –∫–∞–¥—Ä –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø–æ–ª—É—á–∞—Ç–µ–ª—è —Å –ø–æ–º–æ—â—å—é SHA-256:
- –∏—Å—Ö–æ–¥–Ω—ã–π —Ö–µ—à —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `sent_hashes.log`
- –Ω–∞ –ø—Ä–∏—ë–º–Ω–∏–∫–µ —Ö–µ—à –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –∏ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è
- –≤ —Å–ª—É—á–∞–µ –Ω–µ—Å–æ–≤–ø–∞–¥–µ–Ω–∏—è ‚Äî –∫–∞–¥—Ä —Å—á–∏—Ç–∞–µ—Ç—Å—è –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–º

–≠—Ç–æ –∏—Å–∫–ª—é—á–∞–µ—Ç –ª–æ–∂–Ω—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è –∏ –¥–∞—ë—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –ø–µ—Ä–µ–¥–∞—á–∏.


---

## üìä –¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

–§–∞–π–ª `test_speed.cpp` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 10 –ú–ë —Å–ª—É—á–∞–π–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, —à–∏—Ñ—Ä—É–µ—Ç –∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç –∏—Ö, –∏–∑–º–µ—Ä—è—è —Å–∫–æ—Ä–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è ChaCha20-Poly1305.

### üî® –°–±–æ—Ä–∫–∞:

```bash
g++ -g src/test_speed.cpp -lsodium -o build/test_speed
```

### ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫:

```bash
./build/test_speed
```

### üìã –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

```
‚úÖ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ + —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —É—Å–ø–µ—à–Ω—ã
üì¶ –û–±—ä—ë–º: 10 –ú–ë
‚ö° –°–∫–æ—Ä–æ—Å—Ç—å: 136.8 –ú–ë/—Å
```

> üí° –≠—Ç–æ—Ç —Ç–µ—Å—Ç –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç TAP-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ —Å–ª—É–∂–∏—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ libsodium.

---
