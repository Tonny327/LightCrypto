# üîê LightCrypto

  –í –ø—Ä–æ–µ–∫—Ç–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∞–ª–≥–æ—Ä–∏—Ç–º —Å–∏–º–º–µ—Ç—Ä–∏—á–Ω–æ–≥–æ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ–º –∫–ª—é—á–∞ –Ω–∞ –±–∞–∑–µ ECDH (Curve25519, —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫—É libsodium). 
  –û–±–º–µ–Ω –ø—É–±–ª–∏—á–Ω—ã–º–∏ –∫–ª—é—á–∞–º–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —á–µ—Ä–µ–∑ UDP-—Å–æ–∫–µ—Ç, –ø–æ—Å–ª–µ —á–µ–≥–æ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –æ–±—â–∏–π —Å–µ–∫—Ä–µ—Ç —Å –ø–æ–º–æ—â—å—é X25519. 
  –ü–æ–ª—É—á–µ–Ω–Ω—ã–π –∫–ª—é—á –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∞–ª–≥–æ—Ä–∏—Ç–º–µ AEAD ChaCha20-Poly1305 –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ Ethernet-–∫–∞–¥—Ä–æ–≤. (–ü–æ–¥—Ä–æ–±–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ —Ñ–∞–π–ª–µ report.docx)
  
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞](#-—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç–∞)
- [–ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å](#-–∫–∞–∫-–∑–∞–ø—É—Å—Ç–∏—Ç—å)
- [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Å–µ—Ç–µ–≤—ã—Ö –Ω–µ–π–º—Å–ø–µ–π—Å–∞—Ö](#-—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ-–≤-—Å–µ—Ç–µ–≤—ã—Ö-–Ω–µ–π–º—Å–ø–µ–π—Å–∞—Ö)
- [–†–µ–∂–∏–º `--msg`](#Ô∏è-–æ—Ç–ø—Ä–∞–≤–∫–∞-—Å–æ–æ–±—â–µ–Ω–∏–π-–≤-—Ä–µ–∂–∏–º–µ---msg)
- [–†–µ–∂–∏–º –ø–µ—Ä–µ–¥–∞—á–∏ Ethernet-–∫–∞–¥—Ä–æ–≤](#-—Ä–µ–∂–∏–º-–ø–µ—Ä–µ–¥–∞—á–∏-ethernet-–∫–∞–¥—Ä–æ–≤-–ø–æ-—É–º–æ–ª—á–∞–Ω–∏—é)
- [–¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏](#-—Ç–µ—Å—Ç-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏-—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è)

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ tap_encrypt.cpp     // –®–∏—Ñ—Ä—É–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∫–∞–¥—Ä—ã –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è (--msg)
‚îú‚îÄ‚îÄ tap_decrypt.cpp     // –ü—Ä–∏–Ω–∏–º–∞–µ—Ç –∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç –∫–∞–¥—Ä—ã –∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è (--msg)
‚îú‚îÄ‚îÄ test_speed.cpp      // –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
build/                  // –°—é–¥–∞ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã
setup_tap_pair.sh       // –°–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞–Ω–∏—è TAP-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤
```
---

## üöÄ –ö–∞–∫ –∑–∞–ø—É—Å—Ç–∏—Ç—å


### üõ† –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **–û–°**: Linux Ubuntu
- **–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏**: `libsodium-dev`, `iproute2`, `tcpdump`, `iputils-ping`
- **–ü—Ä–∞–≤–∞**: `sudo` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–µ–≤—ã—Ö –Ω–µ–π–º—Å–ø–µ–π—Å–æ–≤ –∏ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ–≥—Ä–∞–º–º

### üõÜ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
sudo apt update
sudo apt install -y libsodium-dev iproute2 tcpdump iputils-ping iperf hping3 python3-tk python3-pip python3-dev
```

### üî® –°–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞

–°–∫–æ–º–ø–∏–ª–∏—Ä—É–π –ø—Ä–æ–≥—Ä–∞–º–º—ã:

```bash
mkdir -p build
g++ -o build/tap_encrypt src/tap_encrypt.cpp -lsodium -pthread
g++ -o build/tap_decrypt src/tap_decrypt.cpp -lsodium -pthread
```

(–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) –ò—Å–ø–æ–ª—å–∑—É–π —Å–∫—Ä–∏–ø—Ç —Å–±–æ—Ä–∫–∏:

```bash
bash rebuild.sh
```
---

## üåê –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ —Å–µ—Ç–µ–≤—ã—Ö –Ω–µ–π–º—Å–ø–µ–π—Å–∞—Ö

### 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –Ω–µ–π–º—Å–ø–µ–π—Å–æ–≤ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

```bash
sudo ip netns delete ns1 2>/dev/null
sudo ip netns delete ns2 2>/dev/null
sudo killall tap_encrypt tap_decrypt tcpdump 2>/dev/null

sudo ip netns add ns1
sudo ip netns add ns2

sudo ip netns exec ns1 ip tuntap add dev tap0 mode tap
sudo ip netns exec ns1 ip addr add 10.0.0.1/24 dev tap0
sudo ip netns exec ns1 ip link set tap0 up

sudo ip netns exec ns2 ip tuntap add dev tap1 mode tap
sudo ip netns exec ns2 ip addr add 10.0.0.2/24 dev tap1
sudo ip netns exec ns2 ip link set tap1 up

sudo ip link add veth1 type veth peer name veth2
sudo ip link set veth1 netns ns1
sudo ip link set veth2 netns ns2
sudo ip netns exec ns1 ip addr add 192.168.1.1/24 dev veth1
sudo ip netns exec ns1 ip link set veth1 up
sudo ip netns exec ns2 ip addr add 192.168.1.2/24 dev veth2
sudo ip netns exec ns2 ip link set veth2 up

sudo ip netns exec ns1 ip route add default via 192.168.1.2
sudo ip netns exec ns2 ip route add default via 192.168.1.1

sudo ip netns exec ns1 sysctl -w net.ipv6.conf.all.disable_ipv6=1
sudo ip netns exec ns2 sysctl -w net.ipv6.conf.all.disable_ipv6=1
```

### 2. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º

**–¢–µ—Ä–º–∏–Ω–∞–ª 1 (–ø—Ä–∏—ë–º–Ω–∏–∫ –≤ ns2):**

```bash
sudo ip netns exec ns2 ./build/tap_decrypt 192.168.1.2 12345
```

**–¢–µ—Ä–º–∏–Ω–∞–ª 2 (–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –≤ ns1):**

```bash
sudo ip netns exec ns1 ./build/tap_encrypt 192.168.1.2 12345
```

### 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ 
**—Å –ø–æ–º–æ—â—å—é ping:**

**–¢–µ—Ä–º–∏–Ω–∞–ª 3:**

```bash
sudo ip netns exec ns1 ping 10.0.0.2
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```bash
PING 10.0.0.2 (10.0.0.2) 56(84) bytes of data.  
64 bytes from 10.0.0.2: icmp_seq=1 ttl=64 time=0.421 ms
```
–ü–∏–Ω–≥ –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å —É—Å–ø–µ—à–Ω—É—é –ø–µ—Ä–µ–¥–∞—á—É, –∞ –≤ –∫–æ–Ω—Å–æ–ª—è—Ö –ø—Ä–æ–≥—Ä–∞–º–º ‚Äî —Å–æ–æ–±—â–µ–Ω–∏—è –æ –∫–∞–¥—Ä–∞—Ö (42 –±–∞–π—Ç–∞ –¥–ª—è ARP, 98 –±–∞–π—Ç –¥–ª—è ICMP).

### üîÅ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–ø—É—Å–∫–Ω–æ–π —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏ —Å iperf

#### TCP:
- **–¢–µ—Ä–º–∏–Ω–∞–ª 3 - –°–µ—Ä–≤–µ—Ä (–≤ ns2):**
```bash
sudo ip netns exec ns2 iperf -s -B 10.0.0.2
```
- **–¢–µ—Ä–º–∏–Ω–∞–ª 4 - –ö–ª–∏–µ–Ω—Ç (–≤ ns1):**
```bash
sudo ip netns exec ns1 iperf -c 10.0.0.2 -t 10
```

#### UDP:
- **–¢–µ—Ä–º–∏–Ω–∞–ª 3 - –°–µ—Ä–≤–µ—Ä:**
```bash
sudo ip netns exec ns2 iperf -s -u -B 10.0.0.2
```
- **–¢–µ—Ä–º–∏–Ω–∞–ª 4 - –ö–ª–∏–µ–Ω—Ç:**
```bash
sudo ip netns exec ns1 iperf -c 10.0.0.2 -u -t 10 -b 100M
```

**üìà –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –≤ –∫–æ–Ω—Å–æ–ª—è—Ö tap_encrypt –∏ tap_decrypt –ø–æ—è–≤—è—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä:**

```bash
–û—Ç–ø—Ä–∞–≤–ª–µ–Ω –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–¥—Ä (1500 –±–∞–π—Ç)
–ü—Ä–∏–Ω—è—Ç –∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω –∫–∞–¥—Ä (1500 –±–∞–π—Ç)
...
```

**iperf –≤—ã–≤–µ–¥–µ—Ç –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å, –Ω–∞–ø—Ä–∏–º–µ—Ä:**
```bash
[  3]  0.0-10.0 sec  110.25 MBytes  103.07 Mbits/sec
```
---
### üß® –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç—Ä–∞—Ñ–∏–∫–∞ —Å –ø–æ–º–æ—â—å—é hping3

**–¢–µ—Ä–º–∏–Ω–∞–ª 3 - TCP SYN-–ø–∞–∫–µ—Ç—ã –∏–∑ ns1:**

```bash
sudo ip netns exec ns1 hping3 10.0.0.2 -S -p 80 -c 10
```

**–¢–µ—Ä–º–∏–Ω–∞–ª 3 - TCP UDP-–ø–∞–∫–µ—Ç—ã –∏–∑ ns1:**

```bash
sudo ip netns exec ns1 hping3 10.0.0.2 -2 -p 5000 -c 10
```
**üìà –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –≤ –∫–æ–Ω—Å–æ–ª—è—Ö tap_encrypt –∏ tap_decrypt –ø–æ—è–≤—è—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä:

```bash
–û—Ç–ø—Ä–∞–≤–ª–µ–Ω –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–¥—Ä (60 –±–∞–π—Ç)
–ü—Ä–∏–Ω—è—Ç –∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω –∫–∞–¥—Ä (60 –±–∞–π—Ç)
```
hping3 –ø–æ–∫–∞–∂–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –ø–∞–∫–µ—Ç—ã –∏ –≤–æ–∑–º–æ–∂–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã.

### ‚úâÔ∏è –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —Ä–µ–∂–∏–º–µ `--msg`

#### –¢–µ—Ä–º–∏–Ω–∞–ª 1 - –ø—Ä–∏—ë–º–Ω–∏–∫ –≤ ns2:
```bash
sudo ip netns exec ns2 ./build/tap_decrypt --msg 192.168.1.2 12345
```

#### –¢–µ—Ä–º–∏–Ω–∞–ª 2 - –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å –≤ ns1:
```bash
sudo ip netns exec ns1 ./build/tap_encrypt --msg 192.168.1.2 12345
```

üñäÔ∏è –í–≤–æ–¥–∏ —Ç–µ–∫—Å—Ç –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è ‚Äî –æ–Ω –±—É–¥–µ—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω –∏ –ø–æ—è–≤–∏—Ç—Å—è –≤ –≤—ã–≤–æ–¥–µ –ø—Ä–∏—ë–º–Ω–∏–∫–∞.

‚úÖ **–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:** –≤ –∫–æ–Ω—Å–æ–ª—è—Ö –ø—Ä–æ–≥—Ä–∞–º–º –ø–æ—è–≤—è—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è, –Ω–∞–ø—Ä–∏–º–µ—Ä:

**üì• –ü—Ä–∏—ë–º–Ω–∏–∫:**
```bash
–û–∂–∏–¥–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ –Ω–∞ IP: 192.168.1.2, –ø–æ—Ä—Ç: 12345
–ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –ø–æ–ª—É—á–µ–Ω
–ü–æ–ª—É—á–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ: "–ü—Ä–∏–≤–µ—Ç, LightCrypto!"
```

**üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å:**
```bash
IP-–∞–¥—Ä–µ—Å: 192.168.1.2, –ø–æ—Ä—Ç: 12345, –Ω–∞—á–∏–Ω–∞–µ–º —Ä–∞–±–æ—Ç—É...
–ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á –ø–æ–ª—É—á–∞—Ç–µ–ª—è –ø–æ–ª—É—á–µ–Ω
–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–æ–±—â–µ–Ω–∏–µ: "–ü—Ä–∏–≤–µ—Ç, LightCrypto!"

### 4. –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –æ—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤

```bash
sudo ip netns delete ns1 2>/dev/null
sudo ip netns delete ns2 2>/dev/null
sudo killall tap_encrypt tap_decrypt tcpdump 2>/dev/null
```


---

## üì° –†–µ–∂–∏–º –ø–µ—Ä–µ–¥–∞—á–∏ Ethernet-–∫–∞–¥—Ä–æ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

### üñ• –õ–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (–Ω–∞ –æ–¥–Ω–æ–º –ü–ö):

```bash
# –¢–µ—Ä–º–∏–Ω–∞–ª 1:
sudo ./build/tap_decrypt

# –¢–µ—Ä–º–∏–Ω–∞–ª 2:
sudo ./build/tap_encrypt
```

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è IP `127.0.0.1` –∏ –ø–æ—Ä—Ç `12345`.

---

### üåê –ó–∞–ø—É—Å–∫ –ø–æ —Å–µ—Ç–∏ (–Ω–∞ –¥–≤—É—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö):

#### –ù–∞ –ø—Ä–∏—ë–º–Ω–∏–∫–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, IP: 192.168.1.2):
```bash
sudo ./build/tap_decrypt 0.0.0.0 5555
```
–∏–ª–∏:
```bash
sudo ./build/tap_decrypt 5555
```

#### –ù–∞ –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª–µ:
```bash
sudo ./build/tap_encrypt 192.168.1.2 5555
```

---

## üí¨ –†–µ–∂–∏–º –ø–µ—Ä–µ–¥–∞—á–∏ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π (`--msg`)

–í —ç—Ç–æ–º —Ä–µ–∂–∏–º–µ –ø—Ä–æ–≥—Ä–∞–º–º—ã —à–∏—Ñ—Ä—É—é—Ç –∏ –ø–µ—Ä–µ–¥–∞—é—Ç —Å—Ç—Ä–æ–∫–∏, –≤–≤–µ–¥—ë–Ω–Ω—ã–µ –≤—Ä—É—á–Ω—É—é.

### üì• –ü—Ä–∏—ë–º–Ω–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π:

```bash
sudo ./build/tap_decrypt --msg
```

–∏–ª–∏ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –ø–æ—Ä—Ç–∞:
```bash
sudo ./build/tap_decrypt --msg 5555
```

### üì§ –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å —Å–æ–æ–±—â–µ–Ω–∏–π:

```bash
sudo ./build/tap_encrypt --msg
```

–∏–ª–∏ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º IP –∏ –ø–æ—Ä—Ç–∞:
```bash
sudo ./build/tap_encrypt --msg 127.0.0.1 5555
```

> ‚úÖ **–ï—Å–ª–∏ –Ω–µ —É–∫–∞–∑—ã–≤–∞—Ç—å IP –∏ –ø–æ—Ä—Ç, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è** `127.0.0.1:12345`.

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –ø—Ä–æ—Å—Ç–æ –≤–≤–æ–¥–∏ —Ç–µ–∫—Å—Ç –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è ‚Äî –æ–Ω –±—É–¥–µ—Ç –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω –∏ –æ—Ç–æ–±—Ä–∞–∑–∏—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –ø—Ä–∏—ë–º–Ω–∏–∫–∞.

---

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –∫–∞–¥—Ä–æ–≤

–í –∫–∞–∂–¥–æ–º –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º–æ–º –∫–∞–¥—Ä–µ (–∏–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–∏) —Å–Ω–∞—á–∞–ª–∞ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è SHA-256 –∏ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è 32‚Äë–±–∞–π—Ç–æ–≤—ã–π —Ö–µ—à –∫ –¥–∞–Ω–Ω—ã–º –ø–µ—Ä–µ–¥ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º. –ù–∞ –ø—Ä–∏—ë–º–Ω–æ–π —Å—Ç–æ—Ä–æ–Ω–µ –ø–æ—Å–ª–µ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∏ —ç—Ç–∏ –ø–µ—Ä–≤—ã–µ 32 –±–∞–π—Ç–∞ –æ—Ç–¥–µ–ª—è—é—Ç—Å—è –∫–∞–∫ ¬´–ø—Ä–∏—Å–ª–∞–Ω–Ω—ã–π —Ö–µ—à¬ª, –∞ –æ—Å—Ç–∞–≤—à–∏–π—Å—è –±–ª–æ–∫ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –∑–∞–Ω–æ–≤–æ —á–µ—Ä–µ–∑ SHA-256. –ï—Å–ª–∏ –≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã–π —Ö–µ—à —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å –ø—Ä–∏—Å–ª–∞–Ω–Ω—ã–º, –∫–∞–¥—Ä —Å—á–∏—Ç–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–º –∏ –≤—ã–≤–æ–¥–∏—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ ¬´–•–µ—à–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç ‚Äî –∫–∞–¥—Ä –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω¬ª. –í –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –∫–∞–¥—Ä –ø—Ä–∏–∑–Ω–∞—ë—Ç—Å—è –ø–æ–≤—Ä–µ–∂–¥—ë–Ω–Ω—ã–º –∏ –∏–≥–Ω–æ—Ä–∏—Ä—É–µ—Ç—Å—è. –¢–∞–∫–æ–π –ø–æ–¥—Ö–æ–¥ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–∫–∞–∑–∞—Ç—å—Å—è –æ—Ç –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –∏ –ª–æ–≥–æ–≤, –¥–µ–ª–∞—è –ø—Ä–æ–≤–µ—Ä–∫—É —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ ¬´–Ω–∞ –ª–µ—Ç—É¬ª –≤ —Å–∞–º–æ–º –ø–∞–∫–µ—Ç–µ.

### –ó–∞—Ö–≤–∞—Ç —Ç—Ä–∞—Ñ–∏–∫–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):

```bash
# –í ns1:
sudo ip netns exec ns1 tcpdump -i tap0 -v

# –í ns2:
sudo ip netns exec ns2 tcpdump -i tap1 -v
```

---

## üìä –¢–µ—Å—Ç –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è

–§–∞–π–ª `test_speed.cpp` –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç 10 –ú–ë —Å–ª—É—á–∞–π–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö, —à–∏—Ñ—Ä—É–µ—Ç –∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤—ã–≤–∞–µ—Ç –∏—Ö, –∏–∑–º–µ—Ä—è—è —Å–∫–æ—Ä–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è ChaCha20-Poly1305.

### üî® –°–±–æ—Ä–∫–∞:

```bash
g++ -g src/test_speed.cpp -lsodium -o build/test_speed
```

### ‚ñ∂Ô∏è –ó–∞–ø—É—Å–∫:

```bash
./build/test_speed
```

### üìã –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:

```
‚úÖ –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ + —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞ —É—Å–ø–µ—à–Ω—ã
üì¶ –û–±—ä—ë–º: 10 –ú–ë
‚ö° –°–∫–æ—Ä–æ—Å—Ç—å: 136.8 –ú–ë/—Å
```

> üí° –≠—Ç–æ—Ç —Ç–µ—Å—Ç –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç TAP-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –∏ —Å–ª—É–∂–∏—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è –æ—Ü–µ–Ω–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ libsodium.


---
