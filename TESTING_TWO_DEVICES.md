# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–≤—É—Ö –≤–∏–¥–æ–≤ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏

## üìä –î–≤–∞ –≤–∏–¥–∞ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **libsodium** (ChaCha20-Poly1305) ‚Äî –±–µ–∑ —Ñ–ª–∞–≥–∞ `--codec`
2. **–¶–∏—Ñ—Ä–æ–≤–æ–π –∫–æ–¥–µ–∫** (Matlab-–∞–ª–≥–æ—Ä–∏—Ç–º) ‚Äî —Å —Ñ–ª–∞–≥–æ–º `--codec`

---

## üîß –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –ù–∞ –æ–±–æ–∏—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö:

1. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
sudo apt install -y libsodium-dev iproute2 tcpdump iputils-ping iperf3 hping3
```

2. **–°–æ–±–µ—Ä–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:**
```bash
cd /path/to/LightCrypto
mkdir -p build
cd build
cmake ..
make
cd ..
```

3. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Å–µ—Ç—å –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏:**

**–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ A:**
```bash
sudo ip addr add 192.168.100.1/24 dev enp0s3  # –∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
sudo ip link set enp0s3 up
```

**–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ B:**
```bash
sudo ip addr add 192.168.100.2/24 dev enp0s3
sudo ip link set enp0s3 up
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
ping -c 3 192.168.100.2  # —Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ A
```

---

## üß™ –¢–µ—Å—Ç 1: –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å libsodium (ChaCha20-Poly1305)

### –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º

**–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ B (–ø–æ–ª—É—á–∞—Ç–µ–ª—å):**
```bash
sudo ./build/tap_decrypt 0.0.0.0 12345
```

**–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ A (–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å):**
```bash
sudo ./build/tap_encrypt 192.168.100.2 12345
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ tap-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

**–ù–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ B:**
```bash
sudo ip addr add 10.0.0.2/24 dev tap1
sudo ip link set tap1 up
```

**–ù–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ A:**
```bash
sudo ip addr add 10.0.0.1/24 dev tap0
sudo ip link set tap0 up
```

### –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

#### 1. Ping —Ç–µ—Å—Ç
```bash
# –° —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ A
ping -c 10 10.0.0.2
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í–∏–¥–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è `üì§ –û—Ç–ø—Ä–∞–≤–ª–µ–Ω –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–∞–¥—Ä` –Ω–∞ A
- –í–∏–¥–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è `‚úÖ –ü—Ä–∏–Ω—è—Ç –∏ —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω –∫–∞–¥—Ä` –Ω–∞ B
- Ping –ø—Ä–æ—Ö–æ–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ

#### 2. iperf3 —Ç–µ—Å—Ç (TCP)

**–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ B (—Å–µ—Ä–≤–µ—Ä):**
```bash
iperf3 -s -B 10.0.0.2
```

**–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ A (–∫–ª–∏–µ–Ω—Ç):**
```bash
iperf3 -c 10.0.0.2 -t 10
```

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**
- –í–∏–¥–Ω—ã —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø–µ—Ä–µ–¥–∞—á–µ –∫–∞–¥—Ä–æ–≤ (–æ–±—ã—á–Ω–æ 1500 –±–∞–π—Ç)
- iperf3 –ø–æ–∫–∞–∂–µ—Ç –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —á–µ—Ä–µ–∑ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–π —Ç—É–Ω–Ω–µ–ª—å

#### 3. iperf3 —Ç–µ—Å—Ç (UDP)

**–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ B (—Å–µ—Ä–≤–µ—Ä):**
```bash
iperf3 -s -B 10.0.0.2
```

**–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ A (–∫–ª–∏–µ–Ω—Ç):**
```bash
iperf3 -c 10.0.0.2 -u -b 100M -t 10
```

#### 4. hping3 —Ç–µ—Å—Ç

**–° —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ A:**
```bash
# TCP SYN –ø–∞–∫–µ—Ç—ã
sudo hping3 10.0.0.2 -S -p 80 -c 10

# UDP –ø–∞–∫–µ—Ç—ã
sudo hping3 10.0.0.2 -2 -p 5000 -c 10
```

### –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–µ—Å—Ç–∞ 1

–ù–∞–∂–º–∏—Ç–µ `Ctrl+C` –Ω–∞ –æ–±–µ–∏—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö.

---

## üß™ –¢–µ—Å—Ç 2: –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ —Å —Ü–∏—Ñ—Ä–æ–≤—ã–º –∫–æ–¥–µ–∫–æ–º (Matlab)

### –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º

**–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ B (–ø–æ–ª—É—á–∞—Ç–µ–ª—å):**
```bash
sudo ./build/tap_decrypt \
  --codec CipherKeys/QDM-6.csv \
  --M 8 \
  --Q 6 \
  --fun 3 \
  --h1 1337 \
  --h2 -2048 \
  0.0.0.0 12345
```

**–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ A (–æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å):**
```bash
sudo ./build/tap_encrypt \
  --codec CipherKeys/QDM-6.csv \
  --M 8 \
  --Q 6 \
  --fun 3 \
  --h1 1337 \
  --h2 -2048 \
  192.168.100.2 12345
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ tap-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

**–ù–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ B:**
```bash
sudo ip addr add 10.0.0.2/24 dev tap1
sudo ip link set tap1 up
```

**–ù–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ A:**
```bash
sudo ip addr add 10.0.0.1/24 dev tap0
sudo ip link set tap0 up
```

### –¢–µ—Å—Ç—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

–í—ã–ø–æ–ª–Ω–∏—Ç–µ —Ç–µ –∂–µ —Ç–µ—Å—Ç—ã, —á—Ç–æ –∏ –¥–ª—è libsodium:

#### 1. Ping —Ç–µ—Å—Ç
```bash
ping -c 10 10.0.0.2
```

#### 2. iperf3 —Ç–µ—Å—Ç (TCP)
```bash
# –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ B
iperf3 -s -B 10.0.0.2

# –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ A
iperf3 -c 10.0.0.2 -t 10
```

#### 3. iperf3 —Ç–µ—Å—Ç (UDP)
```bash
# –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ B
iperf3 -s -B 10.0.0.2

# –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ A
iperf3 -c 10.0.0.2 -u -b 100M -t 10
```

#### 4. hping3 —Ç–µ—Å—Ç
```bash
sudo hping3 10.0.0.2 -S -p 80 -c 10
```

---

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –û–∂–∏–¥–∞–µ–º—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è:

| –ú–µ—Ç—Ä–∏–∫–∞ | libsodium | –¶–∏—Ñ—Ä–æ–≤–æ–π –∫–æ–¥–µ–∫ |
|---------|-----------|----------------|
| Ping RTT (—Å—Ä–µ–¥–Ω–µ–µ) | ? ms | ? ms |
| TCP –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å | ? Mbits/sec | ? Mbits/sec |
| UDP –ø—Ä–æ–ø—É—Å–∫–Ω–∞—è —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å | ? Mbits/sec | ? Mbits/sec |
| –†–∞–∑–º–µ—Ä –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞ | +45 –±–∞–π—Ç overhead | –∑–∞–≤–∏—Å–∏—Ç –æ—Ç M,Q |

### –ó–∞–ø–∏—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:

```bash
# Ping
ping -c 100 10.0.0.2 | tail -1

# iperf3 TCP
iperf3 -c 10.0.0.2 -t 30 | grep "sender"

# iperf3 UDP
iperf3 -c 10.0.0.2 -u -b 100M -t 30 | grep "sender"
```

---

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ç—Ä–∞—Ñ–∏–∫–∞

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞ –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏:

**–ù–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ A:**
```bash
sudo tcpdump -i enp0s3 udp port 12345 -n -c 20
```

–í—ã —É–≤–∏–¥–∏—Ç–µ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ UDP-–ø–∞–∫–µ—Ç—ã, –∏–¥—É—â–∏–µ –º–µ–∂–¥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏.

### –ü—Ä–æ—Å–º–æ—Ç—Ä —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ç—Ä–∞—Ñ–∏–∫–∞ –≤ tap:

**–ù–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–µ A:**
```bash
sudo tcpdump -i tap0 -n -c 20
```

–í—ã —É–≤–∏–¥–∏—Ç–µ –æ–±—ã—á–Ω—ã–µ ICMP, TCP –∏–ª–∏ UDP –ø–∞–∫–µ—Ç—ã (—Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω—ã–µ).

---

## üìù –¢–∞–±–ª–∏—Ü–∞ –¥–ª—è –∑–∞–ø–∏—Å–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

| –¢–µ—Å—Ç | libsodium | –¶–∏—Ñ—Ä–æ–≤–æ–π –∫–æ–¥–µ–∫ |
|------|-----------|----------------|
| **Ping (10 –ø–∞–∫–µ—Ç–æ–≤)** | | |
| - min RTT | ___ ms | ___ ms |
| - avg RTT | ___ ms | ___ ms |
| - max RTT | ___ ms | ___ ms |
| - packet loss | ___% | ___% |
| **iperf3 TCP (10 —Å–µ–∫)** | | |
| - Throughput | ___ Mbits/sec | ___ Mbits/sec |
| **iperf3 UDP (10 —Å–µ–∫, 100M)** | | |
| - Throughput | ___ Mbits/sec | ___ Mbits/sec |
| - Jitter | ___ ms | ___ ms |
| - Lost/Total | ___/___% | ___/___% |
| **hping3 (10 –ø–∞–∫–µ—Ç–æ–≤)** | | |
| - –£—Å–ø–µ—à–Ω–æ | ___ | ___ |

---

## üí° –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã

### –¢–µ—Å—Ç —Å —Ä–∞–∑–Ω—ã–º–∏ —Ä–∞–∑–º–µ—Ä–∞–º–∏ –ø–∞–∫–µ—Ç–æ–≤:

```bash
# Ping —Å –º–∞–ª–µ–Ω—å–∫–∏–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏ (56 –±–∞–π—Ç –¥–∞–Ω–Ω—ã—Ö)
ping -c 10 -s 56 10.0.0.2

# Ping —Å –±–æ–ª—å—à–∏–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏ (1400 –±–∞–π—Ç –¥–∞–Ω–Ω—ã—Ö)
ping -c 10 -s 1400 10.0.0.2

# Ping —Å –æ–≥—Ä–æ–º–Ω—ã–º–∏ –ø–∞–∫–µ—Ç–∞–º–∏ (8000 –±–∞–π—Ç, —Ñ—Ä–∞–≥–º–µ–Ω—Ç–∞—Ü–∏—è)
ping -c 10 -s 8000 10.0.0.2
```

### –¢–µ—Å—Ç latency:

```bash
# –¢–æ—á–Ω—ã–π –∑–∞–º–µ—Ä –∑–∞–¥–µ—Ä–∂–∫–∏
sudo hping3 10.0.0.2 --icmp -c 100 --fast
```

### –¢–µ—Å—Ç –ø–æ–¥ –Ω–∞–≥—Ä—É–∑–∫–æ–π:

```bash
# –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ iperf –ø–æ—Ç–æ–∫–æ–≤
for i in {1..5}; do
  iperf3 -c 10.0.0.2 -t 30 -P 1 &
done
wait
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

- [ ] –¢–µ—Å—Ç 1: libsodium + ping
- [ ] –¢–µ—Å—Ç 1: libsodium + iperf3 TCP
- [ ] –¢–µ—Å—Ç 1: libsodium + iperf3 UDP
- [ ] –¢–µ—Å—Ç 1: libsodium + hping3
- [ ] –¢–µ—Å—Ç 2: –¶–∏—Ñ—Ä–æ–≤–æ–π –∫–æ–¥–µ–∫ + ping
- [ ] –¢–µ—Å—Ç 2: –¶–∏—Ñ—Ä–æ–≤–æ–π –∫–æ–¥–µ–∫ + iperf3 TCP
- [ ] –¢–µ—Å—Ç 2: –¶–∏—Ñ—Ä–æ–≤–æ–π –∫–æ–¥–µ–∫ + iperf3 UDP
- [ ] –¢–µ—Å—Ç 2: –¶–∏—Ñ—Ä–æ–≤–æ–π –∫–æ–¥–µ–∫ + hping3
- [ ] –ó–∞–ø–∏—Å—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ —Ç–∞–±–ª–∏—Ü—É
- [ ] –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

---

## üêõ –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### "Network is unreachable" –ø—Ä–∏ ping 10.0.0.2
**–†–µ—à–µ–Ω–∏–µ:** –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ tap-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –ø–æ–¥–Ω—è—Ç—ã:
```bash
ip addr show tap0  # –Ω–∞ A
ip addr show tap1  # –Ω–∞ B
```

### –ù–∏–∑–∫–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
**–ü—Ä–∏—á–∏–Ω—ã:**
- –°–ª–∞–±–æ–µ –∂–µ–ª–µ–∑–æ
- –ú–Ω–æ–≥–æ –æ—Ç–ª–∞–¥–æ—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π –≤ –∫–æ–Ω—Å–æ–ª–∏ (–ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤—å—Ç–µ –≤ /dev/null)
- Firewall –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∫–∞–∂–¥—ã–π –ø–∞–∫–µ—Ç

**–†–µ—à–µ–Ω–∏–µ –¥–ª—è —É—Å–∫–æ—Ä–µ–Ω–∏—è:**
```bash
# –ó–∞–ø—É—Å–∫–∞–π—Ç–µ –±–µ–∑ –≤—ã–≤–æ–¥–∞ –≤ –∫–æ–Ω—Å–æ–ª—å
sudo ./build/tap_encrypt ... > /dev/null 2>&1
```

### iperf –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç 0 Mbits/sec
**–ü—Ä–∏—á–∏–Ω–∞:** –ü–∞—Ä–∞–º–µ—Ç—Ä—ã —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è –Ω–µ —Å–æ–≤–ø–∞–¥–∞—é—Ç –∏–ª–∏ —Ç—É–Ω–Ω–µ–ª—å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.
**–†–µ—à–µ–Ω–∏–µ:** –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ ping, –∑–∞—Ç–µ–º iperf.

